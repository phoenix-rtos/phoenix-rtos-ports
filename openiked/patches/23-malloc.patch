diff -ruN a/compat/imsg-buffer.c b/compat/imsg-buffer.c
--- a/compat/imsg-buffer.c	2021-04-15 19:18:01.000000000 +0200
+++ b/compat/imsg-buffer.c	2021-08-23 12:48:27.519210651 +0200
@@ -41,7 +41,11 @@
 
 	if ((buf = calloc(1, sizeof(struct ibuf))) == NULL)
 		return (NULL);
+#ifdef __phoenix__
+	if ((buf->buf = malloc(len == 0 ? 16 : len)) == NULL) { /* libphoenix malloc(0) returns NULL */
+#else
 	if ((buf->buf = malloc(len)) == NULL) {
+#endif
 		free(buf);
 		return (NULL);
 	}

