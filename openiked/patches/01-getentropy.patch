diff -ruN a/compat/arc4random.c b/compat/arc4random.c
--- a/compat/arc4random.c	2021-08-18 22:06:04.191291517 +0200
+++ b/compat/arc4random.c	2021-08-18 22:16:45.634625004 +0200
@@ -32,6 +32,7 @@
 #include <unistd.h>
 #include <sys/types.h>
 #include <sys/time.h>
+#include <time.h>
 
 #define KEYSTREAM_ONLY
 #include "chacha_private.h"
@@ -65,6 +66,21 @@
 static inline void _rs_forkdetect(void);
 #include "arc4random.h"
 
+#ifndef HAVE_GETENTROPY
+int getentropy(void *buffer, size_t length)
+{
+	uint8_t *p = (uint8_t *)buffer;
+
+	srandom(clock());
+
+	for (size_t i = 0; i < length; ++i) {
+		 p[i] = random() % 0x100;
+	}
+
+	return 0;
+}
+#endif
+
 static inline void _rs_rekey(u_char *dat, size_t datlen);
 
 static inline void

