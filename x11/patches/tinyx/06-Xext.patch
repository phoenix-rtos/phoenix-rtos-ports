diff -ruN a/Xext/shm.c b/Xext/shm.c
--- a/Xext/shm.c	2022-11-07 07:44:53.000000000 +0100
+++ b/Xext/shm.c	2024-08-02 10:34:26.811392798 +0200
@@ -33,8 +33,10 @@
 #endif
 
 #include <sys/types.h>
+#ifndef __phoenix__
 #include <sys/ipc.h>
 #include <sys/shm.h>
+#endif
 #include <unistd.h>
 #include <sys/stat.h>
 #include <X11/X.h>
@@ -210,6 +212,9 @@
 void
 ShmExtensionInit(INITARGS)
 {
+#ifdef __phoenix__
+    return; // kernel has no support for shm
+#endif
     ExtensionEntry *extEntry;
 
     int i;
@@ -278,15 +283,22 @@
 void
 ShmRegisterFuncs(ScreenPtr pScreen, ShmFuncsPtr funcs)
 {
+#ifdef __phoenix__
+    return; // kernel has no support for shm
+#endif
     shmFuncs[pScreen->myNum] = funcs;
 }
 
 void
 ShmSetPixmapFormat(ScreenPtr pScreen, int format)
 {
+#ifdef __phoenix__
+    return; // kernel has no support for shm
+#endif
     shmPixFormat[pScreen->myNum] = format;
 }
 
+#ifndef __phoenix__
 static Bool
 ShmDestroyPixmap(PixmapPtr pPixmap)
 {
@@ -308,14 +320,19 @@
     pScreen->DestroyPixmap = ShmDestroyPixmap;
     return ret;
 }
+#endif
 
 void
 ShmRegisterFbFuncs(pScreen)
 ScreenPtr pScreen;
 {
+#ifdef __phoenix__
+    return; // kernel has no support for shm
+#endif
     shmFuncs[pScreen->myNum] = &fbFuncs;
 }
 
+#ifndef __phoenix__
 static int
 ProcShmQueryVersion(client)
 ClientPtr client;
@@ -989,3 +1006,4 @@
         return BadRequest;
     }
 }
+#endif
diff -ruN a/Xext/sync.c b/Xext/sync.c
--- a/Xext/sync.c	2022-11-07 07:44:53.000000000 +0100
+++ b/Xext/sync.c	2024-08-02 10:34:26.810392937 +0200
@@ -65,7 +65,7 @@
 #include "resource.h"
 #include "opaque.h"
 #define _SYNC_SERVER
-#include <X11/extensions/sync.h>
+#include <X11/extensions/syncconst.h>
 #include <X11/extensions/syncstr.h>
 
 #include <stdio.h>
