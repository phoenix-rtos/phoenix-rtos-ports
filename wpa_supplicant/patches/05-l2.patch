diff -ruN a/src/l2_packet/l2_packet_linux.c b/src/l2_packet/l2_packet_linux.c
--- a/src/l2_packet/l2_packet_linux.c	2021-05-31 16:31:59.609379115 +0200
+++ b/src/l2_packet/l2_packet_linux.c	2021-05-31 16:58:15.307335940 +0200
@@ -10,7 +10,9 @@
 #include <sys/ioctl.h>
 #include <netpacket/packet.h>
 #include <net/if.h>
+#if 0
 #include <linux/filter.h>
+#endif /* 0 */
 
 #include "common.h"
 #include "eloop.h"
@@ -40,6 +42,7 @@
 #endif /* CONFIG_NO_LINUX_PACKET_SOCKET_WAR */
 };
 
+#if 0
 /* Generated by 'sudo tcpdump -s 3000 -dd greater 278 and ip and udp and
  * src port bootps and dst port bootpc'
  */
@@ -103,6 +106,7 @@
 	.len = ARRAY_SIZE(pkt_type_filter_insns),
 	.filter = pkt_type_filter_insns,
 };
+#endif /* 0 */
 
 
 int l2_packet_get_own_addr(struct l2_packet_data *l2, u8 *addr)
@@ -341,6 +345,7 @@
 {
 	struct l2_packet_data *l2;
 #ifndef CONFIG_NO_LINUX_PACKET_SOCKET_WAR
+#if 0
 	struct sock_filter ethertype_sock_filter_insns[] = {
 		/* Load ethertype */
 		BPF_STMT(BPF_LD | BPF_H | BPF_ABS, 2 * ETH_ALEN),
@@ -355,6 +360,7 @@
 		.len = ARRAY_SIZE(ethertype_sock_filter_insns),
 		.filter = ethertype_sock_filter_insns,
 	};
+#endif /* 0 */
 	struct sockaddr_ll ll;
 #endif /* CONFIG_NO_LINUX_PACKET_SOCKET_WAR */
 
@@ -399,6 +405,7 @@
 		return l2;
 	}
 
+#if 0
 	if (setsockopt(l2->fd_br_rx, SOL_SOCKET, SO_ATTACH_FILTER,
 		       &ethertype_sock_filter, sizeof(struct sock_fprog))) {
 		wpa_printf(MSG_DEBUG,
@@ -409,6 +416,7 @@
 		l2->fd_br_rx = -1;
 		return l2;
 	}
+#endif /* 0 */
 
 	eloop_register_read_sock(l2->fd_br_rx, l2_packet_receive_br, l2, NULL);
 #endif /* CONFIG_NO_LINUX_PACKET_SOCKET_WAR */
@@ -479,6 +487,7 @@
 int l2_packet_set_packet_filter(struct l2_packet_data *l2,
 				enum l2_packet_filter_type type)
 {
+#if 0
 	const struct sock_fprog *sock_filter;
 
 	if (TEST_FAIL())
@@ -505,6 +514,7 @@
 			   strerror(errno));
 		return -1;
 	}
+#endif /* 0 */
 
 	return 0;
 }
